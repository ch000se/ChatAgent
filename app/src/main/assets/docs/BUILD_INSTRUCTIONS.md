# –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ø–æ –∑–±—ñ—Ä—Ü—ñ RAG Chat –ø—Ä–æ–µ–∫—Ç—É

## –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø–æ–º–∏–ª–∫–∏ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó

‚úÖ **RagChatViewModel.kt**:
- –í–∏–¥–∞–ª–µ–Ω–æ –ø–∞—Ä–∞–º–µ—Ç—Ä `similarityThreshold` (–Ω–µ —ñ—Å–Ω—É—î –≤ SearchDocumentsUseCase)
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –æ–±—Ä–æ–±–∫—É `Result<List<DocumentSearchResult>>` - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `.getOrNull()`
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞ `isNotEmpty()` –¥–ª—è —Å–ø–∏—Å–∫—É –∑–∞–º—ñ—Å—Ç—å Result

‚úÖ **RagChatScreen.kt**:
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ `Alignment.End` ‚Üí `Alignment.CenterEnd`
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ `Alignment.Start` ‚Üí `Alignment.CenterStart`
- Box.contentAlignment –ø–æ—Ç—Ä–µ–±—É—î 2D alignment, –∞ –Ω–µ 1D (Horizontal)

## –Ø–∫ –ø–æ–±—É–¥—É–≤–∞—Ç–∏ –ø—Ä–æ–µ–∫—Ç

### –í–∞—Ä—ñ–∞–Ω—Ç 1: Android Studio (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Android Studio
2. –î–æ—á–µ–∫–∞–π—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è Gradle Sync
3. **Build** ‚Üí **Rebuild Project**
4. –ê–±–æ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å Run ‚ñ∂Ô∏è –¥–ª—è –∑–±—ñ—Ä–∫–∏ —Ç–∞ –∑–∞–ø—É—Å–∫—É

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ö–æ–º–∞–Ω–¥–Ω–∏–π —Ä—è–¥–æ–∫ (Windows)
```cmd
# –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –ø—Ä–æ–µ–∫—Ç—É
cd D:\AndroidStudioProjects\ChatAgent

# –ü–æ–±—É–¥—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
gradlew.bat clean assembleDebug

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
dir app\build\outputs\apk\debug\app-debug.apk
```

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ PowerShell
```powershell
cd D:\AndroidStudioProjects\ChatAgent
.\gradlew.bat clean assembleDebug
```

## –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–Ø–∫—â–æ –∑–±—ñ—Ä–∫–∞ —É—Å–ø—ñ—à–Ω–∞, –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:
```
BUILD SUCCESSFUL in Xs
```

APK –±—É–¥–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏—Å—è —Ç—É—Ç:
```
app\build\outputs\apk\debug\app-debug.apk
```

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ –ø—Ä–∏—Å—Ç—Ä—ñ–π

```cmd
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó
adb devices

# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å APK
adb install -r app\build\outputs\apk\debug\app-debug.apk
```

## –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏

### –ü—Ä–æ–±–ª–µ–º–∞: JAVA_HOME not set
**–†—ñ—à–µ–Ω–Ω—è**: –í Android Studio –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç –∫–Ω–æ–ø–∫–æ—é Run ‚ñ∂Ô∏è

### –ü—Ä–æ–±–ª–µ–º–∞: Database migration error –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É
**–†—ñ—à–µ–Ω–Ω—è**:
1. –í–∏–¥–∞–ª—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫ –∑ –ø—Ä–∏—Å—Ç—Ä–æ—é
2. –ü–µ—Ä–µ—ñ–Ω—Å—Ç–∞–ª—é–π—Ç–µ: `adb install -r app-debug.apk`

### –ü—Ä–æ–±–ª–µ–º–∞: Gradle sync failed
**–†—ñ—à–µ–Ω–Ω—è**:
1. File ‚Üí Invalidate Caches / Restart
2. Sync Project with Gradle Files

## –©–æ –¥–æ–¥–∞–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç

### –ù–æ–≤—ñ —Ñ–∞–π–ª–∏:
- ‚úÖ `presentation/ragchat/RagChatViewModel.kt`
- ‚úÖ `presentation/ragchat/RagChatScreen.kt`
- ‚úÖ `RAG_CHAT_TEST_GUIDE.md` - –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ø–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—é

### –ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- ‚úÖ `domain/model/Message.kt` - –¥–æ–¥–∞–Ω–æ –ø–æ–ª–µ `sources`
- ‚úÖ `data/local/entity/MessageEntity.kt` - –¥–æ–¥–∞–Ω–æ `sourcesJson`
- ‚úÖ `data/mapper/MessageMapper.kt` - —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–∂–µ—Ä–µ–ª
- ‚úÖ `data/local/ChatDatabase.kt` - –≤–µ—Ä—Å—ñ—è –ë–î 2‚Üí3
- ‚úÖ `presentation/navigation/NavGraph.kt` - –º–∞—Ä—à—Ä—É—Ç Screen.RagChat
- ‚úÖ `presentation/chat/ChatScreen.kt` - –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥—É üí¨

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –∑–±—ñ—Ä–∫–∏

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –∑–±—ñ—Ä–∫–∏ —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:

1. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫**
2. **–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏** —á–µ—Ä–µ–∑ –µ–∫—Ä–∞–Ω Documents
3. **–Ü–Ω–¥–µ–∫—Å—É–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏** (–Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "Index Document")
4. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ RAG Chat** (—ñ–∫–æ–Ω–∫–∞ üí¨ –Ω–∞ –≥–æ–ª–æ–≤–Ω–æ–º—É –µ–∫—Ä–∞–Ω—ñ)
5. **–ó–∞–¥–∞–π—Ç–µ –ø–∏—Ç–∞–Ω–Ω—è** –ø—Ä–æ –≤–º—ñ—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
6. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Sources** –ø—ñ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–¥—é –∞—Å–∏—Å—Ç–µ–Ω—Ç–∞

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∑–º—ñ–Ω

```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–¥–∞—î –ø–∏—Ç–∞–Ω–Ω—è
         ‚Üì
RagChatViewModel.sendMessage()
         ‚Üì
SearchDocumentsUseCase (Top-5 –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤)
         ‚Üì
–ü–æ–±—É–¥–æ–≤–∞ RAG –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
         ‚Üì
ChatRepository.sendMessage() –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
         ‚Üì
LLM –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
         ‚Üì
–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ + sources –≤ –ë–î
         ‚Üì
UI –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –±—É–ª—å–±–∞—à–∫—É + —Ä–æ–∑–∫—Ä–∏–≤–Ω—ñ Sources
```

## –í–µ—Ä—Å—ñ—è –ë–î

‚ö†Ô∏è **–í–ê–ñ–õ–ò–í–û**: –í–µ—Ä—Å—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω–∞ –∑ 2 –¥–æ 3.

–ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:
- `fallbackToDestructiveMigration()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É –ë–î
- –Ü—Å—Ç–æ—Ä—ñ—è —á–∞—Ç—ñ–≤ –±—É–¥–µ –æ—á–∏—â–µ–Ω–∞
- –î–æ–∫—É–º–µ–Ω—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–∞–Ω–æ–≤–æ

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. ‚úÖ –ó–±—É–¥—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
2. ‚úÖ –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –Ω–∞ –ø—Ä–∏—Å—Ç—Ä—ñ–π
3. ‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ç–µ—Å—Ç–æ–≤—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏
4. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ RAG Chat
5. ‚úÖ –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ `RAG_CHAT_TEST_GUIDE.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–∏—Ö —Ç–µ—Å—Ç–æ–≤–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í—Å—ñ –ø–æ–º–∏–ª–∫–∏ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ, –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ –∑–±—ñ—Ä–∫–∏!
